(this["webpackJsonpnote-react"]=this["webpackJsonpnote-react"]||[]).push([[0],{43:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n.n(a),i=n(28),c=n.n(i),r=n(7),d=(n(43),n(2));var o=function(e){var t=e.isSelected,n=e.title,a=void 0===n?"Empty":n,s=e.time,i=e.text,c=void 0===i?"Write Something here...":i,o=e.id,l=e.setSide,u=e.isEdit,j=e.isCreate,b=Object(r.a)(t,2),O=b[0],h=b[1];return Object(d.jsxs)("div",{className:"list-item ".concat(O.is&&O.id===o&&"selected"),onClick:function(){u||j||(h({is:!0,id:o}),l(!0))},children:[Object(d.jsx)("h4",{className:"list-item__title",children:a}),Object(d.jsxs)("div",{className:"list-item__info",children:[Object(d.jsx)("div",{className:"list-item__data",children:s}),Object(d.jsx)("div",{className:"list-item__text",children:c})]})]})},l=function(e,t){var n=function(e){for(var t=[],n=e.replace(/[^a-z,A-Z,\u0430-\u044f\u0456\u0454\u0457\u0491,\u0410-\u042f\u0490\u0404\u0406\u0407,0-9\s\n]/g,""),a=0;a<n.length;a++)0===a&&" "===n[a]||"\n"===n[a-1]&&" "===n[a]||" "===n[a]&&" "===n[a-1]||t.push(n[a]);return n}(e),a=n.split(/\r?\n/).filter((function(e){return""!==e}));if(t||0!==a.length)return t?a[0]:n.substr(a[0].length)},u=function(e){var t=new Date(e).getDate(),n=new Date(e).getMonth(),a=new Date(e).getFullYear(),s=new Date(e).getHours(),i=new Date(e).getMinutes(),c=new Date(Date.now()).getDate();return t===c?"".concat(1===s.toString().length?"0"+s:s,":").concat(1===i.toString().length?"0"+i:i):t<c?"".concat(1===t.toString().length?"0"+t:t,".").concat(1===n.toString().length?"0"+n:n,".").concat(a):void 0},j=s.a.createContext(null);var b=function(){var e=Object(a.useContext)(j),t=e.data,n=e.isSelected,s=e.isSide,i=e.isEdit,c=e.isCreate,b=Object(r.a)(s,2)[1],O=Object(r.a)(i,1)[0],h=Object(r.a)(c,1)[0];return Object(d.jsx)("div",{className:"sidebar-list list",children:null===t||void 0===t?void 0:t.sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(e){return Object(d.jsx)(o,{title:l(e.text,!0),text:l(e.text,!1),time:u(e.date),isSelected:n,setSide:b,id:e.id,isEdit:O.is,isCreate:h},e.id)}))})};var O=function(e){var t=e.side;return Object(d.jsx)("div",{className:"content-sidebar sidebar ".concat(t?"hide":""),children:Object(d.jsx)(b,{})})},h=n(13),v=n.n(h),f=n(24),x=new(n(26).default)("listDb");x.version(1).stores({notes:"++id,text"});var m=function(){var e=Object(f.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.notes.delete(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(f.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.notes.add({date:Date.now(),text:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(v.a.mark((function e(t,n,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.notes.update(n,{date:a,text:t});case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();var g=function(e){var t=e.item,n=e.forEdit,s=Object(a.useContext)(j).area,i=Object(r.a)(s,2),c=i[0],o=i[1],l=Object(a.useState)(n?t.text:""),u=Object(r.a)(l,2),b=u[0],O=u[1],h=Object(a.useRef)(null);return Object(a.useEffect)((function(){h&&h.current.focus()}),[]),Object(a.useEffect)((function(){n&&_(b,t.id,Date.now())}),[n,null===t||void 0===t?void 0:t.id,b]),Object(d.jsx)("div",{className:"workspace-editarea",children:Object(d.jsx)("textarea",{ref:h,className:"workspace-editarea__text",value:n?b:c,onFocus:function(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},onChange:function(e){n?O(e.target.value):o(e.target.value)}})})},N=n(35),S=n(36);var w=function(e){var t=e.time,n=e.text;return Object(d.jsxs)("div",{className:"workspace-renderarea",children:[Object(d.jsx)("h5",{className:"workspace-renderarea__time",children:t.toString().substr(0,24)}),Object(d.jsx)(N.a,{className:"workspace-renderarea__text",children:n,remarkPlugins:[S.a]})]})},C=function(e,t){return e.filter((function(e){return e.id===t.id}))[0]},k=n(23);var E=function(){var e=Object(a.useContext)(j).isCreate,t=Object(r.a)(e,2)[1];return Object(d.jsx)("div",{className:"workspace-emptyarea",children:Object(d.jsx)(k.a,{className:"workspace-emptyarea__icon",onClick:function(){return t(!0)}})})};var D=function(e){var t=e.side,n=Object(a.useContext)(j),s=n.data,i=n.isSelected,c=n.isEdit,o=n.isCreate,l=Object(r.a)(i,1)[0],u=Object(r.a)(c,1)[0],b=Object(r.a)(o,1)[0];return Object(d.jsx)("div",{className:"content-workspace workspace ".concat(!t&&(null===s||void 0===s?void 0:s.length)>0?"hide":""),children:b?Object(d.jsx)(g,{forEdit:!1}):u.is?Object(d.jsx)(g,{item:C(s,u),forEdit:!0}):l.is?Object(d.jsx)(w,{text:C(s,l).text,time:new Date(C(s,l).date)}):Object(d.jsx)(E,{})})};n(50);var y=function(){var e=Object(a.useContext)(j),t=e.data,n=e.isSide,s=Object(r.a)(n,1)[0];return Object(d.jsxs)("div",{className:"content",children:[(null===t||void 0===t?void 0:t.length)>0&&Object(d.jsx)(O,{side:s}),Object(d.jsx)(D,{side:s})]})},H=n(16),I=n(19),T=n(33);var A=function(e){var t=e.setIsOpen,n=e.selected,a=e.setSelected,s=e.setSide,i=e.isInit,c=Object(r.a)(i,2),o=c[0],l=c[1];return Object(d.jsx)("div",{className:"modal",children:Object(d.jsxs)("div",{className:"modal-form form",children:[Object(d.jsx)("h2",{className:"form__title",children:"Are you sure?"}),Object(d.jsxs)("div",{className:"form-buttons",children:[Object(d.jsx)("button",{onClick:function(){m(n.id),t(!1),a({is:!1,id:null}),s(!1),o&&l(!1)},className:"form-buttons_btn form-buttons__agree",children:Object(d.jsx)(H.c,{})}),Object(d.jsx)("button",{onClick:function(){return t(!1)},className:"form-buttons_btn form-buttons__decline",children:Object(d.jsx)(H.d,{})})]})]})})};var M=function(){var e=Object(a.useContext)(j),t=e.data,n=e.isSelected,s=e.isEdit,i=e.isCreate,c=e.area,o=e.isSide,l=e.isInit,u=Object(r.a)(n,2),b=u[0],O=u[1],h=Object(r.a)(s,2),v=h[0],f=h[1],x=Object(r.a)(i,2),m=x[0],_=x[1],g=Object(r.a)(c,2),N=g[0],S=g[1],w=Object(r.a)(o,2),C=w[0],E=w[1],D=Object(a.useState)(!1),y=Object(r.a)(D,2),M=y[0],P=y[1];return Object(d.jsxs)("div",{className:"header-buttons",children:[(null===t||void 0===t?void 0:t.length)>0&&Object(d.jsx)("button",{disabled:!(!v.is&&!m),type:"button",className:"header-buttons__btn header-buttons__list ".concat(v.is||m?"disabled":""),onClick:function(){E(!C)},title:"List",children:Object(d.jsx)(T.a,{})}),Object(d.jsx)("button",{disabled:!v.is&&!m,type:"button",className:"header-buttons__btn header-buttons__save ".concat(v.is||m?"":"disabled"),onClick:function(){if(m)return p(N),S(""),_(!1),void E(!C);var e=v.id;f({is:!1,id:null}),O({is:!0,id:e})},title:"Save",children:Object(d.jsx)(I.b,{})}),Object(d.jsx)("button",{disabled:!!b.is||(!!v.is||!!m),type:"button",className:"header-buttons__btn header-buttons__create ".concat(b.is||v.is||m?"disabled":""),onClick:function(){E(!C),O({is:!1,id:null}),_(!0)},title:"Create",children:Object(d.jsx)(k.a,{})}),Object(d.jsx)("button",{disabled:!(b.is||v.is&&m),className:"header-buttons__btn header-buttons__edit ".concat(b.is||v.is&&m?"":"disabled"),onClick:function(){f({is:!0,id:b.id}),O({is:!1,id:null})},title:"Edit",children:Object(d.jsx)(H.b,{})}),Object(d.jsx)("button",{disabled:!(b.is&&!v.is||m),className:"header-buttons__btn header-buttons__delete ".concat(b.is&&!v.is||m?"":"disabled"),onClick:function(){if(m)return _(!1),O({is:!1,id:null}),void S("");P(!0)},title:"Delete",children:Object(d.jsx)(H.a,{})}),Object(d.jsx)("a",{className:"header-buttons__btn header-buttons__help",href:"https://commonmark.org/help/",target:"_blank",rel:"noreferrer",title:"Help",children:Object(d.jsx)(I.a,{})}),M&&Object(d.jsx)(A,{setIsOpen:P,selected:b,setSelected:O,setSide:E,isInit:l})]})};var P=function(){return Object(d.jsx)("div",{className:"header-title",children:Object(d.jsx)("h4",{className:"header-title__text\t",children:"Note App"})})};var F=function(){var e=Object(a.useContext)(j),t=e.data,n=e.isSelected,s=Object(a.useState)(""),i=Object(r.a)(s,2),c=i[0],o=i[1],l=Object(r.a)(n,2)[1];return Object(a.useEffect)((function(){""!==c?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;null===t||void 0===t||t.forEach((function(t){t.text.includes(e)&&n({is:!0,id:t.id})}))}(c,t,l):l({is:!1,id:null})}),[c,t,l]),Object(d.jsxs)("div",{className:"header-search",children:[Object(d.jsx)(I.c,{className:"header-search__label"}),Object(d.jsx)("input",{className:"header-search__input",value:c,type:"text",onChange:function(e){return o(e.target.value)},placeholder:"Enter a query..."})]})};n(51);var J=function(){return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)(M,{}),Object(d.jsx)(P,{}),Object(d.jsx)(F,{})]})},L=n(34);var R=function(){var e=Object(L.useLiveQuery)((function(){var e;return null===(e=x.notes)||void 0===e?void 0:e.toArray()}),[]),t=Object(a.useState)({is:!1,id:null}),n=Object(r.a)(t,2),s=n[0],i=n[1],c=Object(a.useState)({is:!1,id:null}),o=Object(r.a)(c,2),l=o[0],u=o[1],b=Object(a.useState)(!1),O=Object(r.a)(b,2),h=O[0],v=O[1],f=Object(a.useState)(""),m=Object(r.a)(f,2),_=m[0],g=m[1],N=Object(a.useState)(!1),S=Object(r.a)(N,2),w=S[0],C=S[1],k=Object(a.useState)(!0),E=Object(r.a)(k,2),D=E[0],H=E[1];return Object(a.useEffect)((function(){if(void 0!==e&&0===e.length){if(!D)return;H(!1),p("# TIPS\n---\n'# Header ' -> Header \u21161\n# Header\n'## Header ' -> Header \u21162\n## Header\nToo see more examples use button help(?)")}}),[e,D]),Object(d.jsx)("div",{className:"app",onClick:function(e){var t,n;"path"!==e.target.nodeName&&"svg"!==e.target.nodeName&&(((null===(t=e.target)||void 0===t?void 0:t.className.includes("app"))||(null===(n=e.target)||void 0===n?void 0:n.className.includes("sidebar")))&&i({is:!1,id:null}))},children:Object(d.jsx)("div",{className:"app-wrapper",children:Object(d.jsxs)(j.Provider,{value:{data:e,isSelected:[s,i],isEdit:[l,u],isCreate:[h,v],area:[_,g],isSide:[w,C],isInit:[D,H]},children:[Object(d.jsx)(J,{}),Object(d.jsx)(y,{})]})})})};c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(R,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.78e0dbe8.chunk.js.map